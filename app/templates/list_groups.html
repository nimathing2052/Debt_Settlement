{% extends "layout.html" %}
{% block styles %}
<style>
    body {
        font-family: Arial, sans-serif;
    }
    h3 {
        text-align: center;
        color: #333;
        font-size: 24px;
        margin-top: 20px;
    }
    .group-table {
        width: 100%;
        border-collapse: collapse;
        margin: 25px auto;
        font-size: 0.9em;
        font-family: sans-serif;
        min-width: 400px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
    }
    .group-table thead tr {
        background-color: #009879;
        color: white;
        text-align: left;
    }
    .group-table th, .group-table td {
        padding: 12px 15px;
    }
    .group-table tbody tr {
        border-bottom: 1px solid #dddddd;
    }
    .group-table tbody tr:nth-of-type(even) {
        background-color: #f3f3f3;
    }
    .group-table tbody tr:last-of-type {
        border-bottom: 2px solid #009879;
    }
    .pagination {
        display: flex;
        justify-content: center;
        list-style-type: none;
        padding: 0;
        margin-top: 20px;
    }
    .page-item {
        margin: 0 5px;
        cursor: pointer;
    }
    .page-item a {
        color: #007bff;
        text-decoration: none;
        padding: 5px 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .page-item.active span,
    .page-item a:hover {
        background-color: #007bff;
        color: white;
        border-color: #007bff;
    }
    .page-item.disabled span {
        color: #6c757d;
        pointer-events: none;
        cursor: not-allowed;
    }
</style>
{% endblock %}

{% block content %}
<h3>Existing Groups</h3>

{% if groups.items %}
    <table class="group-table">
        <thead>
            <tr>
                <th>Group Name</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for group in groups.items %}
            <tr>
                <td>{{ group.name }}</td>
                <td>
                    <a href="{{ url_for('view_group', group_id=group.id) }}">View</a>
                    {% if current_user.is_authenticated and current_user.is_admin %}
                    - <a href="{{ url_for('edit_group', group_id=group.id) }}">Edit</a>
                    <form action="{{ url_for('delete_group', group_id=group.id) }}" method="post" style="display: inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this group?');">Delete</button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination Controls -->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if groups.has_prev %}
                <li class="page-item"><a class="page-link" href="{{ url_for('list_groups', page=groups.prev_num) }}">Previous</a></li>
            {% endif %}
            {% for page_num in groups.iter_pages() %}
                {% if page_num %}
                    {% if page_num != groups.page %}
                        <li class="page-item"><a class="page-link" href="{{ url_for('list_groups', page=page_num) }}">{{ page_num }}</a></li>
                    {% else %}
                        <li class="page-item active"><span class="page-link">{{ page_num }}</span></li>
                    {% endif %}
                {% else %}
                    <li class="page-item disabled"><span class="page-link">â€¦</span></li>
                {% endif %}
            {% endfor %}
            {% if groups.has_next %}
                <li class="page-item"><a class="page-link" href="{{ url_for('list_groups', page=groups.next_num) }}">Next</a></li>
            {% endif %}
        </ul>
    </nav>
{% else %}
    <p>No groups found.</p>
{% endif %}
{% endblock %}
